#!/usr/bin/env bash
# List all configuration files of specified me-<subcommand>

ETC_DIR="M4_ETC_DIR"

usage() {
  cat <<EOF
Usage: me-conf-list <conf_dir>

Arguments:
  conf_dir    Configuration directory
EOF
}

list_conf() {
  if me conf-dir-list | grep -E "^$1$" &>/dev/null; then
    find "$ETC_DIR/me-$1.d" \
      -maxdepth 1 -type f -name '*.conf' ! -name "example.conf" \
      -exec basename -s .conf {} \;
  else
    echo "Configuration directory '$1' doesn't exist."
    exit 1
  fi
}

# Main
case $1 in
  ''  ) usage ;;
  *   ) list_conf "$1" ;;
esac

